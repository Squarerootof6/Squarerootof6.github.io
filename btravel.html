<!DOCTYPE html>
<html>
    <head>
        <title>Genghao Liu's Footprint</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="stylesheet" href="./assets/css/main.css" />
        <link rel="stylesheet" href="./assets/css/Multiverse.css" />
        <script src="https://kit.fontawesome.com/9c6ea3fa88.js" crossorigin="anonymous"></script>
        <style>
          /* 初始状态下隐藏内容 */
          #hiddenContent {
              display: block;
          }
      </style>
    </head>

    <body class="is-preload">

      <div id="wrapper">
        <div id="main">
          <div class="inner">
          <!-- Header -->
          <header id="header">
            <a href="./index.html" class="logo"><strong>Genghao Liu's</strong> Homepage</a>
              <ul class="icons">
                  <li><a href="https://orcid.org/0009-0007-4049-127X" class="icon brands fa-orcid"><span class="label">ORCID</span></a></li>
                  <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                  <li><a href="https://www.facebook.com/profile.php?id=100009560453540" class="icon brands fa-facebook-f" target="_blank"><span class="label">Facebook</span></a></li>
                  <li><a href="https://github.com/Squarerootof6" class="icon brands fa-github"><span class="label">Github</span></a></li>
                  <li><a href="https://www.instagram.com/square_root_of_six/" class="icon brands fa-instagram" target="_blank"><span class="label">Instagram</span></a></li>
                  <li><a href="https://space.bilibili.com/34658125?spm_id_from=333.1007.0.0" class="icon brands fa-bilibili" target="_blank"><span class="label">BiliBili</span></a></li>
              </ul>
          </header>
          <section>
            <div id="map" style="height: 80vh; width: 100%; margin: 0 auto"></div>
          </section>
          
          <section>
            <header class="major" id="albumheader"></header>

            <div id="hiddenContent" >
              <div class="poptrox-overlay" id="album" ></div>

            <!--<script src="./assets/js/jquery.poptrox.min.js"></script>
            <script src="./assets/js/main.js"></script>--> 
          </div>
          </section>

          
          </div>
        
        </div>
				<!-- Sidebar -->
                <div id="sidebar">
                    <div class="inner">

                        <!-- Search -->
                            <section id="search" class="alt">
                                <form method="post" action="#">
                                    <input type="text" name="query" id="query" placeholder="Search" />
                                </form>
                            </section>

                        <!-- Menu -->
                            <nav id="menu">
                                <header class="major">
                                    <h2>Menu</h2>
                                </header>
                                <ul>
                                    <li><a href="index.html">Homepage</a></li>
                                    <!--<li><a href="generic.html">Generic</a></li>-->
                                    <!--<li><a href="elements.html">Elements</a></li>-->
                                    <li><a href="Research.html">Research</a></li>
                                    <li>
                                        <span class="opener">Hobbies</span>
                                        <ul>
                                            <li><a href="generic.html">Volleyball</a></li>
                                            <li><a href="elements.html">Guitar</a></li>
                                            <li><a href="#">Photography</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="btravel.html">Footprint</a></li>
                                </ul>
                            </nav>
                        <!-- Section -->
                            <section>
                                <header class="major">
                                    <h2>Get in touch</h2>
                                </header>
                                <p>If you are interested in any of my projects and would like to collaborate, do not hesitate to contact me!</p>
                                <ul class="contact">
                                    <li class="icon brands fa-google"><a href="#">liugenghao0310@gmail.com</a></li>
                                    <li class="icon solid fa-school"><a href="#">liugh33@mail2.sysu.edu.cn</a></li>
                                    <li class="icon solid fa-envelope"><a href="#">squarerootof6@outlook.com</a></li>
                                </ul>
                            </section>
                        <!-- Section -->
                        <section>
                            <header class="major">
                                <h2>Message Board</h2>
                            </header>
                            <div class="mini-posts">
                                <form method="post" action="#">
                                    <div class="row gtr-uniform">
                                        <div class="col-6 col-12-xsmall">
                                            <input type="text" name="demo-name" id="demo-name" value="" placeholder="Name" />
                                        </div>
                                        <div class="col-6 col-12-xsmall">
                                            <input type="email" name="demo-email" id="demo-email" value="" placeholder="Email" />
                                        </div>
                                        <!-- Break -->
                                        <div class="col-12">
                                            <select name="demo-category" id="demo-category">
                                                <option value="">- Category -</option>
                                                <option value="1">Scholar</option>
                                                <option value="1">Backseat Driver</option>
                                                <option value="1">Like-minded People</option>
                                                <option value="1">Admirer</option>
                                                <option value="1">Hater</option>
                                            </select>
                                        </div>
                                        <!-- Break -->
                                        <div class="col-6 col-12-small">
                                            <input type="checkbox" id="demo-human" name="demo-human" checked>
                                            <label for="demo-human">I am a human</label>
                                        </div>
                                        <!-- Break -->
                                        <div class="col-12">
                                            <textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
                                        </div>
                                        <!-- Break -->
                                        <div class="col-12">
                                            <ul class="actions">
                                                <li><input type="submit" value="Send Message" class="primary" /></li>
                                                <li><input type="reset" value="Reset" /></li>
                                            </ul>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </section>


                        <!-- Footer -->
                            <footer id="footer">
                                <p class="copyright">&copy; Untitled. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
                            </footer>

                    </div>
                </div>
      </div>
      <script src="./assets/js/jquery.min.js"></script>
      <script src="./assets/js/browser.min.js"></script>
      <script src="./assets/js/breakpoints.min.js"></script>
      <script src="./assets/js/util.js"></script>
      <script src="./assets/js/main.js"></script>
      <script src='./assets/js/data.js'></script>
      <!-- 引入 ECharts -->
      <script src="./assets/js/echarts.min.js"></script>
      <!-- 引入百度地图扩展 -->
      <script src="https://api.map.baidu.com/api?v=3.0&ak=11KhO6AwgKNDOIiu4N6AEHozzcNOn4cq"></script>
        <script src="assets/js/bmap.min.js"></script>
        <script type="text/javascript">
          var dom = document.getElementById('map');
          var myChart = echarts.init(dom, null, {
            renderer: 'canvas',
            useDirtyRect: false
          });
          var app = {};
          
          var option;
          option = {
            title: {
              text: '刘耿昊的足迹',
              subtext: 'footprint of squareroot',
              left: 'center'
            },
            tooltip: {
              trigger: 'item'
            },
            bmap: {
              center: [120,10],
              zoom: 6,
              roam: true,
              mapStyle: {
                styleJson: [
                  {
                    featureType: 'water',
                    elementType: 'all',
                    stylers: {
                      color: '#d1d1d1'
                    }
                  },
                  {
                    featureType: 'land',
                    elementType: 'all',
                    stylers: {
                      color: '#f3f3f3'
                    }
                  },
                  {
                    featureType: 'railway',
                    elementType: 'all',
                    stylers: {
                      visibility: 'off'
                    }
                  },
                  {
                    featureType: 'highway',
                    elementType: 'all',
                    stylers: {
                      color: '#fdfdfd'
                    }
                  },
                  {
                    featureType: 'highway',
                    elementType: 'labels',
                    stylers: {
                      visibility: 'off'
                    }
                  },
                  {
                    featureType: 'arterial',
                    elementType: 'geometry',
                    stylers: {
                      color: '#fefefe'
                    }
                  },
                  {
                    featureType: 'arterial',
                    elementType: 'geometry.fill',
                    stylers: {
                      color: '#fefefe'
                    }
                  },
                  {
                    featureType: 'green',
                    elementType: 'all',
                    stylers: {
                      visibility: 'off'
                    }
                  },
                  {
                    featureType: 'subway',
                    elementType: 'all',
                    stylers: {
                      visibility: 'off'
                    }
                  },
                  {
                    featureType: 'manmade',
                    elementType: 'all',
                    stylers: {
                      color: '#d1d1d1'
                    }
                  },
                  {
                    featureType: 'local',
                    elementType: 'all',
                    stylers: {
                      color: '#d1d1d1'
                    }
                  },
                  {
                    featureType: 'boundary',
                    elementType: 'all',
                    stylers: {
                      color: '#fefefe'
                    }
                  },
                  {
                    featureType: 'building',
                    elementType: 'all',
                    stylers: {
                      color: '#d1d1d1'
                    }
                  },
                ]
              }
            },
          };

          //const Description = getDescription()
          const convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var geoCoord = data[i].coord;
                if (geoCoord) {
                    res.push({
                        name: data[i].name,
                        value: geoCoord.concat(data[i].value),
                    });
                }
            }
            return res;
        };
          option['series'] = [
          {
            name: 'footprint',
            type: 'scatter',
            coordinateSystem: 'bmap',
            data: convertData(data),
            symbolSize: function (val) {
              return val[2] / 2;
            },
            encode: {
              value: 2
            },
            label: {
              formatter: '{b}',
              position: 'right',
              show: false
            },
            emphasis: {
              label: {
                show: true
              }
            }
          },
          {
            name: 'Top 5',
            type: 'effectScatter',
            coordinateSystem: 'bmap',
            data: convertData(
              data
                .sort(function (a, b) {
                  return b.value - a.value;
                })
                .slice(0, 6)
            ),
            symbolSize: function (val) {
              return val[2] / 2;
            },
            encode: {
              value: 2
            },
            showEffectOn: 'render',
            rippleEffect: {
              brushType: 'stroke'
            },
            label: {
              formatter: '{b}',
              position: 'right',
              show: true
            },
            itemStyle: {
              shadowBlur: 10,
              shadowColor: '#333'
            },
            emphasis: {
              scale: true
            },
            zlevel: 1
          }
        ]
          if (option && typeof option === 'object') {
            myChart.setOption(option);
          }
              window.addEventListener('resize', myChart.resize);

    myChart.on('click', function (params) {
      if (params.seriesType === 'scatter' || params.seriesType === 'effectScatter') {
          var albumheader = document.getElementById('albumheader');
          var city = params.data.name
          albumheader.innerHTML = '';
          var header = document.createElement('h2');
          header.textContent = params.data.name;
          albumheader.appendChild(header);
          // 获取 <div class="poptrox-overlay" id="album"> 标签
          var album = document.getElementById('album');
          album.innerHTML = '';
          // 创建三个 <article class="thumb"> 标签，并添加到 <div class="poptrox-overlay" id="album"> 中
          var imgnum = parseInt(params.data.value[2]);
          for (var i = 1; i <= imgnum; i++) {
              var thumb = document.createElement('article');
              var h2 = document.createElement('h2');
              var link = document.createElement('a');
              var p = document.createElement('p');
              var img = document.createElement('img');
              img.src =   "./travel_images/"+city+"/thumbs/"+i.toString().padStart(2, '0')+".jpg";
              link.href = "./travel_images/"+city+"/fulls/"+i.toString().padStart(2, '0')+".jpg";
              link.className = 'image';
              link.appendChild(img);
              h2.textContent = Description[city][i+1][0];
              //p.textContent = 'Nunc blandit nisi ligula magna sodales lectus elementum non. Integer id venenatis velit.';
              
              p.textContent = Description[city][i+1][1];
              thumb.className = 'thumb';
              thumb.appendChild(link);
              thumb.appendChild(h2);
              thumb.appendChild(p);
              album.appendChild(thumb);
          }
        
          var hiddenContent = document.getElementById('hiddenContent');
          var scripts = ["jquery.poptrox.min.js","main.js"];
          scripts.forEach(function(script) {
              var js = document.createElement('script');
              js.src = "./assets/js/" + script;
              hiddenContent.appendChild(js);
          });
            // 如果内容是隐藏的，则显示它；如果已经显示，则隐藏它
            //if (hiddenContent.style.display === 'none') {
            //    hiddenContent.style.display = 'block';
            //} else {
            //    hiddenContent.style.display = 'none';
            //}
      }
    });
        </script>
      
    </body>
</html>